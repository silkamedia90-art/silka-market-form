<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª | Silka Market</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f0f2f5; padding: 20px; }
    .container { background: white; padding: 25px; max-width: 500px; margin: 0 auto; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
    
    .main-logo {
        display: block; margin: 0 auto 25px auto; max-width: 180px; height: auto;
    }
    
    h2 { text-align: center; color: #007bff; margin-bottom: 20px; }
    
    .section-title { font-size: 18px; color: #128C7E; margin-top: 25px; margin-bottom: 10px; border-bottom: 2px solid #eee; padding-bottom: 5px; font-weight: bold; }
    label { font-weight: bold; display: block; margin-bottom: 5px; color: #333; font-size: 14px; }
    
    input, textarea, select { width: 100%; padding: 12px; margin-bottom: 5px; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; font-size: 14px; transition: 0.3s; background-color: #fff; }
    
    ::placeholder { color: #999; opacity: 1; font-size: 13px; }

    .helper-text { font-size: 12px; color: #555; background-color: #f8f9fa; padding: 8px 10px; border-radius: 4px; border-right: 3px solid #17a2b8; margin-bottom: 15px; line-height: 1.4; white-space: pre-line; }
    .photo-instructions { background-color: #fff3cd; color: #856404; padding: 10px; border-radius: 6px; font-size: 13px; margin-bottom: 10px; border: 1px solid #ffeeba; line-height: 1.5; }
    
    .example-boxes { display: flex; gap: 10px; margin-bottom: 10px; }
    .ex-box { flex: 1; height: 40px; border-radius: 6px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; border: 2px solid #ddd; text-align: center; }
    .ex-correct { background-color: white; border-color: #28a745; color: #28a745; }
    .ex-wrong { background-color: #e2e3e5; border-color: #dc3545; color: #dc3545; }

    .real-examples { display: flex; gap: 10px; margin-bottom: 15px; }
    .real-ex-item { flex: 1; text-align: center; }
    .real-ex-img { width: 100%; height: 120px; object-fit: cover; border-radius: 6px; border: 1px solid #ddd; margin-bottom: 5px; cursor: pointer; transition: transform 0.2s; }
    .real-ex-img:hover { transform: scale(1.02); }
    .caption-correct { color: #28a745; font-size: 11px; font-weight: bold; }
    .caption-wrong { color: #dc3545; font-size: 11px; font-weight: bold; }

    .agreement-box {
        background-color: #e9ecef;
        padding: 15px;
        border-radius: 8px;
        margin-top: 25px;
        border: 1px solid #ced4da;
        display: flex;
        align-items: flex-start;
        gap: 12px;
    }
    .agreement-box input[type="checkbox"] {
        width: 25px;
        height: 25px;
        margin-top: 2px;
        cursor: pointer;
        flex-shrink: 0; 
    }
    .agreement-box label {
        font-size: 13px;
        font-weight: bold;
        color: #495057;
        cursor: pointer;
        line-height: 1.6;
        margin: 0;
    }

    #pSku { background-color: #e9ecef; color: #495057; font-weight: bold; letter-spacing: 1px; cursor: not-allowed; text-align: center; border: 2px solid #ced4da; margin-bottom: 15px; }
    
    textarea { height: 150px; resize: vertical; }
    select { cursor: pointer; margin-bottom: 15px; }
    
    .btn { width: 100%; padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 15px; transition: 0.3s; }
    .upload-btn { background-color: #6c757d; color: white; }
    
    /* Ù„ÙˆÙ† Ù…Ù…ÙŠØ² Ù„Ø²Ø± Ø±ÙØ¹ Ø§Ù„Ù„ÙˆØ¬Ùˆ */
    .logo-btn { background-color: #6f42c1; color: white; } 

    .process-btn { background-color: #007bff; color: white; }
    .whatsapp-btn { background-color: #25D366; color: white; display: none; margin-top: 10px; animation: fadeIn 0.5s; text-decoration: none; text-align: center; display: block; }
    
    .disabled { background-color: #ccc; cursor: not-allowed; }

    #status { margin-top: 15px; font-size: 14px; color: #555; text-align: center; }
    .preview-list { display: flex; gap: 5px; flex-wrap: wrap; margin-top: 10px; justify-content: center; }
    .preview-thumb { width: 60px; height: 60px; object-fit: cover; border-radius: 4px; border: 1px solid #ddd; }
    
    .success-msg { display: none; background: #d4edda; color: #155724; padding: 10px; border-radius: 6px; text-align: center; margin-top: 10px; border: 1px solid #c3e6cb; }

    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
  </style>
</head>
<body>

  <div class="container">
    <img src="https://res.cloudinary.com/druttu7iu/image/upload/v1768982815/Crochet-Logo_Final_mpamgy.png" alt="Silka Market Logo" class="main-logo">
    
    <h2>ØªØ³Ø¬ÙŠÙ„ Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ ğŸ“¦</h2>

    <div class="section-title">ğŸ”¢ ÙƒÙˆØ¯ Ø§Ù„Ù…Ù†ØªØ¬ (SKU)</div>
    <label>ÙƒÙˆØ¯ Ù…Ø±Ø¬Ø¹ÙŠ ÙØ±ÙŠØ¯:</label>
    <input type="text" id="pSku" readonly>

    <div class="section-title">ğŸ‘¤ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ø±Ø¶ (Ø«Ø§Ø¨ØªØ©)</div>
    <label>Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶:</label>
    <input type="text" id="vName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„">
    <label>Ø±Ù‚Ù… Ø§Ù„ØªÙ„ÙŠÙÙˆÙ†:</label>
    <input type="tel" id="vPhone" placeholder="01xxxxxxxxx" style="margin-bottom: 15px;">
    
    <label>Ù†Ø¨Ø°Ø© Ø¹Ù† Ø§Ù„Ø¹Ø§Ø±Ø¶ (Bio):</label>
    <textarea id="vBio" placeholder="Ø§ÙƒØªØ¨ Ù†Ø¨Ø°Ø© (Ø¹Ø±Ø¨ÙŠ Ø£Ùˆ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)..." style="height:100px;"></textarea>
    <div class="helper-text">
ğŸ›‘ <strong>Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù†Ø¨Ø°Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:</strong>
1. Ø§Ø³Ù… Ø§Ù„ÙÙ†Ø§Ù† Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ.
2. Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø© Ø§Ù„Ù…Ù‚ÙŠÙ… Ø¨Ù‡Ø§.
3. ØªÙØ§ØµÙŠÙ„ Ø¹Ù† Ø§Ù„Ø®Ø¨Ø±Ø© (Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù†ÙŠÙ†ØŒ ØªØ¹Ù„Ù… Ø§Ù„Ø­Ø±ÙØ© ÙÙŠÙ†ØŒ Ø¥ÙŠÙ‡ Ø´ØºÙÙ‡ØŒ Ø§Ù„Ø®).
âš ï¸ <strong>Ø´Ø±Ø·:</strong> 75 ÙƒÙ„Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.
    </div>

    <label>ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ© Ø£Ùˆ Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø¨Ø±Ø§Ù†Ø¯:</label>
    <input type="file" id="vLogoInput" accept="image/*" style="display:none">
    <button onclick="document.getElementById('vLogoInput').click()" class="btn logo-btn" id="logoSelectBtn">ğŸ“¸ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶/Ø§Ù„Ù„ÙˆØ¬Ùˆ</button>
    <div id="logoPreviewArea" style="margin-top:10px; text-align:center;"></div>

    <div class="section-title">ğŸ“‚ ØªØµÙ†ÙŠÙ Ø§Ù„Ù…Ù†ØªØ¬</div>
    <label>Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ:</label>
    <select id="mainCategory" onchange="updateSubCategories()">
        <option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ --</option>
    </select>

    <label>Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ:</label>
    <select id="subCategory" disabled>
        <option value="">-- ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ø£ÙˆÙ„Ø§Ù‹ --</option>
    </select>

    <div class="section-title">ğŸ‘• ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</div>
    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
    <input type="text" id="pName" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… (Ø¹Ø±Ø¨ÙŠ Ø£Ùˆ Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ)">
    <div class="helper-text">
<strong>Ù…Ø«Ø§Ù„:</strong> Ø£Ø³ÙˆØ±Ø© ÙŠØ¯ Ù…Ø·Ø±Ø²Ø© Ø¨Ø§Ù„Ø®Ø±Ø² ØªØµÙ…ÙŠÙ… Ù‚Ø±Ù…Ø²ÙŠ Ù„Ø§Ù…Ø¹
<br>âš ï¸ <strong>Ø´Ø±Ø·:</strong> Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 6 ÙƒÙ„Ù…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.
    </div>

    <label>Ø§Ù„Ø³Ø¹Ø± (Ø¬.Ù…):</label>
    <input type="number" id="pPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±" style="margin-bottom: 15px;">
    
    <label>ÙˆØ²Ù† Ø§Ù„Ù…Ù†ØªØ¬ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ (Ø¨Ø§Ù„Ø¬Ø±Ø§Ù…Ø§Øª):</label>
    <input type="number" id="pWeight" placeholder="Ù…Ø«Ø§Ù„: 250" style="margin-bottom: 15px;">
    
    <label>Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬ (Ø·ÙˆÙ„ * Ø¹Ø±Ø¶ * Ø§Ø±ØªÙØ§Ø¹):</label>
    <input type="text" id="pDimensions" placeholder="Ù…Ø«Ø§Ù„: 30 Ø³Ù… * 40 Ø³Ù…" style="margin-bottom: 15px;">

    <label>Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</label>
    <input type="text" id="pSizes" placeholder="ÙÙŠ Ø­Ø§Ù„Ø© Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ù… Ø¨ÙƒØªØ§Ø¨Ø© Ù„Ø§ ÙŠÙˆØ¬Ø¯">

    <label>Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…ØªÙˆÙØ±Ø©:</label>
    <input type="text" id="pColors" placeholder="ÙÙŠ Ø­Ø§Ù„Ø© Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù‚Ù… Ø¨ÙƒØªØ§Ø¨Ø© Ù„Ø§ ÙŠÙˆØ¬Ø¯">

    <label>Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬:</label>
    <textarea id="pDesc" placeholder="Ø§Ø­ÙƒÙŠ Ù„Ù†Ø§ Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ØªÙØµÙŠÙ„..."></textarea>
    <div class="helper-text">
ğŸ›‘ <strong>Ù…Ù‡Ù… Ø¬Ø¯Ø§Ù‹:</strong> Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ ÙŠØ¬Ø¨ Ø£Ù† ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰:
1. Ø§Ø³Ù… Ø§Ù„Ø´Ø®Øµ Ø§Ù„Ù„ÙŠ ØµÙ†Ø¹ Ø§Ù„Ù…Ù†ØªØ¬
2. Ù…Ù† Ø£ÙŠ Ù…Ø­Ø§ÙØ¸Ø© Ø¨Ù…ØµØ±
3. Ù…Ø³ØªÙˆØ­Ù‰ ÙÙƒØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø£ÙŠÙ‡
4. Ø§Ù„Ù…Ø§ØªØ±ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ ØµÙ†Ø§Ø¹Ø© Ø§Ù„Ù…Ù†ØªØ¬
5. Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù…Ù†ØªØ¬
âš ï¸ <strong>Ø´Ø±Ø·:</strong> ÙŠØ¬Ø¨ ÙƒØªØ§Ø¨Ø© 75 ÙƒÙ„Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ù„ÙŠØªÙ… Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨.
    </div>

    <div class="section-title">ğŸ“· ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬ (Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 4)</div>
    
    <div class="photo-instructions">
        ğŸ›‘ <strong>ØªØ¹Ù„ÙŠÙ…Ø§Øª Ù‡Ø§Ù…Ø© Ù„Ù„ØµÙˆØ±:</strong><br>
        1. ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ø¶Ø­Ø©ØŒ Ø¨Ø¯ÙˆÙ† Ø£ÙŠ Ù„ÙˆØ¬Ùˆ.<br>
        2. Ø§Ù„Ù…Ù†ØªØ¬ ÙÙŠ Ø§Ù„Ù…Ù†ØªØµÙ ÙˆØ¸Ø§Ù‡Ø± Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŒ ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© Ø¨ÙŠØ¶Ø§Ø¡ ØªÙ…Ø§Ù…Ø§Ù‹ Ø£Ùˆ Ù…ÙˆØ­Ø¯Ø© Ø§Ù„Ù„ÙˆÙ†.<br>
        ğŸ’¡ <strong>ÙŠÙØ¶Ù„ ØªØµÙˆÙŠØ± Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø£ÙƒØ«Ø± Ù…Ù† Ø²Ø§ÙˆÙŠØ© Ø¥Ù† Ø£Ù…ÙƒÙ† Ù„ØªÙˆØ¶ÙŠØ­ Ø§Ù„ØªÙØ§ØµÙŠÙ„.</strong>
    </div>

    <div class="example-boxes">
        <div class="ex-box ex-correct">âœ… Ø±Ø³Ù… ØªÙˆØ¶ÙŠØ­ÙŠ</div>
        <div class="ex-box ex-wrong">âŒ Ø±Ø³Ù… ØªÙˆØ¶ÙŠØ­ÙŠ</div>
    </div>

    <div class="real-examples">
        <div class="real-ex-item">
            <img src="https://res.cloudinary.com/druttu7iu/image/upload/v1768982688/V4-00015_wzg769.jpg" class="real-ex-img" onclick="window.open(this.src)">
            <div class="caption-correct">Ù…Ø«Ø§Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ (ØµØ­ÙŠØ­)</div>
        </div>
        <div class="real-ex-item">
            <img src="https://res.cloudinary.com/druttu7iu/image/upload/v1768982728/V27-00107_bk81gp.jpg" class="real-ex-img" onclick="window.open(this.src)">
            <div class="caption-wrong">Ù…Ø«Ø§Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ (Ø®Ø§Ø·Ø¦)</div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" multiple style="display:none">
    <button onclick="document.getElementById('fileInput').click()" class="btn upload-btn" id="selectBtn">ğŸ“¸ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± (Max 4)</button>
    
    <div id="status"></div>
    <div id="previewArea" class="preview-list"></div>
    
    <div class="agreement-box">
        <input type="checkbox" id="agreementCheck">
        <label for="agreementCheck">
            Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„ÙŠ Ø£Ù† Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø°ÙŠ Ù‚Ù…Øª Ø¨Ø±ÙØ¹Ù‡ Ù‡Ùˆ Ù…Ù†ØªØ¬ Ù…ØµÙ†ÙˆØ¹ ÙŠØ¯ÙˆÙŠØ§ Ø¨Ù†Ø³Ø¨Ø© 100 % Ø¯ÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§ÙŠ Ù…Ø§ÙƒÙŠÙ†Ø§Øª ÙˆØ£ÙˆØ§ÙÙ‚ Ø§Ù† ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ù†ØªØ¬Ø§ØªÙŠ Ù…Ù† Ù‚Ø¨Ù„ ØªÙŠÙ… Ø³ÙŠÙ„ÙƒØ§ Ù…Ø§Ø±ÙƒØª Ù„Ù…Ø¹Ø±ÙØ© Ø§Ø°Ø§ ÙƒØ§Ù†Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø£Ù… Ù„Ø§.
        </label>
    </div>

    <div id="successMsg" class="success-msg">âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­! Ø§Ø¶ØºØ· Ø¨Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨.</div>

    <hr style="margin: 25px 0; border: 0; border-top: 1px solid #eee;">

    <button onclick="processOrder()" id="processBtn" class="btn process-btn">ØªØ±Ø¬Ù…Ø© ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ ğŸ”„</button>
    <a id="waLinkBtn" href="#" target="_blank" class="btn whatsapp-btn" onclick="finishAndReset()" style="display:none;">ğŸ“² Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ø¥Ø±Ø³Ø§Ù„ ÙˆØ§ØªØ³Ø§Ø¨</a>

  </div>

  <script>
    // âš ï¸âš ï¸ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ âš ï¸âš ï¸
    const CLOUD_NAME = "druttu7iu"; 
    const UPLOAD_PRESET = "Platform_Data"; 
    const MY_PHONE_NUMBER = "201025889935"; 
    const MAX_IMAGES = 4;
    
    const GOOGLE_SHEET_URL = "https://script.google.com/macros/s/AKfycbzeDps9_rS_iiA6X9M4x2EP-fQwc1sBFhgF8ibgvyh8Z7fjHpCQ3KNU6upNtt_CrtA/exec"; 

    // Ù…ØªØºÙŠØ± Ù„ØªØ®Ø²ÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„Ù„ÙˆØ¬Ùˆ
    let exhibitorLogoUrl = "";

    function generateSKU() {
        const now = new Date();
        const datePart = now.toISOString().slice(2,10).replace(/-/g, "");
        const randomPart = Math.floor(1000 + Math.random() * 9000);
        document.getElementById("pSku").value = `SKU-${datePart}-${randomPart}`;
    }

    window.onload = function() {
        generateSKU();
        const mainSelect = document.getElementById("mainCategory");
        for (let key in categoriesData) {
            let option = document.createElement("option");
            option.value = key; option.text = key; mainSelect.add(option);
        }
    };

    const categoriesData = {
        "Pottery & Ceramics - Ø§Ù„ÙØ®Ø§Ø± ÙˆØ§Ù„Ø®Ø²Ù": ["Traditional Pottery - Ø§Ù„ÙØ®Ø§Ø± Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ", "Artistic Ceramics - Ø§Ù„Ø®Ø²Ù Ø§Ù„ÙÙ†ÙŠ", "Household Cookware - Ø£ÙˆØ§Ù†ÙŠ Ø§Ù„Ø·Ù‡ÙŠ Ø§Ù„Ù…Ù†Ø²Ù„ÙŠØ©", "Mugs & Plates - Ø£ÙƒÙˆØ§Ø¨ ÙˆØ£Ø·Ø¨Ø§Ù‚", "Ceramic Decor - Ø¯ÙŠÙƒÙˆØ± Ø®Ø²ÙÙŠ", "Clay Art Pieces - Ù‚Ø·Ø¹ ÙÙ†ÙŠØ© Ø·ÙŠÙ†ÙŠØ©"],
        "Woodworks - Ø§Ù„Ù…Ø´ØºÙˆÙ„Ø§Øª Ø§Ù„Ø®Ø´Ø¨ÙŠØ©": ["Wood Carving & Engraving - Ø§Ù„Ø­ÙØ± ÙˆØ§Ù„Ù†Ù‚Ø´ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø´Ø¨", "Wooden Home Decor - Ø¯ÙŠÙƒÙˆØ± Ù…Ù†Ø²Ù„ÙŠ Ø®Ø´Ø¨ÙŠ", "Wooden Kitchenware - Ø£Ø¯ÙˆØ§Øª Ù…Ø·Ø¨Ø® Ø®Ø´Ø¨ÙŠØ©", "Handmade Boxes & Containers - Ø¹Ù„Ø¨ ÙˆØ­Ø§ÙˆÙŠØ§Øª ÙŠØ¯ÙˆÙŠØ© Ø§Ù„ØµÙ†Ø¹", "Frames - Ø¥Ø·Ø§Ø±Ø§Øª (Ø¨Ø±Ø§ÙˆÙŠØ²)", "Wooden Toys - Ø£Ù„Ø¹Ø§Ø¨ Ø®Ø´Ø¨ÙŠØ©"],
        "Gifts & Customized Products - Ø§Ù„Ù‡Ø¯Ø§ÙŠØ§ ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø®ØµØµØ©": ["Customized Gifts - Ù‡Ø¯Ø§ÙŠØ§ Ù…Ø®ØµØµØ© (Ø­Ø³Ø¨ Ø§Ù„Ø·Ù„Ø¨)", "Personalized & Branded Products - Ù…Ù†ØªØ¬Ø§Øª Ø´Ø®ØµÙŠØ© ÙˆØ¨Ø´Ø¹Ø§Ø± Ø®Ø§Øµ", "Occasion Boxes - ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø§Øª", "Corporate Gifts - Ù‡Ø¯Ø§ÙŠØ§ Ø§Ù„Ø´Ø±ÙƒØ§Øª", "Souvenirs - ØªØ°ÙƒØ§Ø±Ø§Øª"],
        "Textile Crafts & Embroidery - Ø§Ù„Ø­Ø±Ù Ø§Ù„Ù†Ø³ÙŠØ¬ÙŠØ© ÙˆØ§Ù„ØªØ·Ø±ÙŠØ²": ["Handmade Embroidery (Rural â€“ Bedouin â€“ Nubian) - ØªØ·Ø±ÙŠØ² ÙŠØ¯ÙˆÙŠ", "Handmade Crochet - ÙƒØ±ÙˆØ´ÙŠÙ‡ ÙŠØ¯ÙˆÙŠ", "Knitting - Ø­ÙŠØ§ÙƒØ© (ØªØ±ÙŠÙƒÙˆ)", "MacramÃ© - Ù…ÙƒØ±Ù…ÙŠØ©", "Hand Weaving - Ù†Ø³ÙŠØ¬ ÙŠØ¯ÙˆÙŠ", "Carpets & Kilim - Ø³Ø¬Ø§Ø¯ ÙˆÙƒÙ„ÙŠÙ…", "Handmade Home Textiles - Ù…Ù†Ø³ÙˆØ¬Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ© ÙŠØ¯ÙˆÙŠØ©"],
        "Jewelry & Accessories - Ø§Ù„Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙˆØ§Ù„Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª": ["Beaded Accessories - Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø®Ø±Ø²", "Silver Jewelry - Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª ÙØ¶ÙŠØ©", "Copper Jewelry - Ù…Ø¬ÙˆÙ‡Ø±Ø§Øª Ù†Ø­Ø§Ø³ÙŠØ©", "Natural Stone Accessories - Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø§Ù„Ø£Ø­Ø¬Ø§Ø± Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©", "Seashell Accessories - Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª ØµØ¯Ù", "Hair Accessories - Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ø´Ø¹Ø±", "Fabric Bags & Accessories - Ø­Ù‚Ø§Ø¦Ø¨ ÙˆØ¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ù‚Ù…Ø§Ø´ÙŠØ©"],
        "Fashion & Wearables - Ø§Ù„Ø£Ø²ÙŠØ§Ø¡ ÙˆØ§Ù„Ù…Ù„Ø¨ÙˆØ³Ø§Øª": ["Heritage Clothing - Ù…Ù„Ø§Ø¨Ø³ ØªØ±Ø§Ø«ÙŠØ©", "Abayas & Kaftans - Ø¹Ø¨Ø§ÙŠØ§Øª ÙˆÙ‚ÙØ§Ø·ÙŠÙ†", "Embroidered Dresses - ÙØ³Ø§ØªÙŠÙ† Ù…Ø·Ø±Ø²Ø©", "Shawls & Scarves - Ø´Ø§Ù„Ø§Øª ÙˆØ£ÙˆØ´Ø­Ø©", "Handmade Footwear - Ø£Ø­Ø°ÙŠØ© ÙŠØ¯ÙˆÙŠØ© Ø§Ù„ØµÙ†Ø¹", "Handbags - Ø­Ù‚Ø§Ø¦Ø¨ ÙŠØ¯"],
        "Perfumes & Natural Products - Ø§Ù„Ø¹Ø·ÙˆØ± ÙˆØ§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠØ©": ["Natural Soap - ØµØ§Ø¨ÙˆÙ† Ø·Ø¨ÙŠØ¹ÙŠ", "Scented Candles - Ø´Ù…ÙˆØ¹ Ù…Ø¹Ø·Ø±Ø©", "Natural Perfumes & Oils - Ø¹Ø·ÙˆØ± ÙˆØ²ÙŠÙˆØª Ø·Ø¨ÙŠØ¹ÙŠØ©", "Essential Oils - Ø²ÙŠÙˆØª Ø¹Ø·Ø±ÙŠØ© (Ø£Ø³Ø§Ø³ÙŠØ©)", "Incense (Bakhoor) - Ø¨Ø®ÙˆØ±", "Natural Care Products - Ù…Ù†ØªØ¬Ø§Øª Ø¹Ù†Ø§ÙŠØ© Ø·Ø¨ÙŠØ¹ÙŠØ©"],
        "Arts & Home DÃ©cor - Ø§Ù„ÙÙ†ÙˆÙ† ÙˆØ§Ù„Ø¯ÙŠÙƒÙˆØ± Ø§Ù„Ù…Ù†Ø²Ù„ÙŠ": ["Handmade Paintings - Ù„ÙˆØ­Ø§Øª ÙÙ†ÙŠØ© ÙŠØ¯ÙˆÙŠØ©", "Arabic Calligraphy - Ø§Ù„Ø®Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠ", "Wall Decor - Ø¯ÙŠÙƒÙˆØ± Ø­Ø§Ø¦Ø·", "Artistic Ornaments - Ø­Ù„ÙŠØ§Øª ÙˆØªØ­Ù ÙÙ†ÙŠØ©", "Artistic Home Accessories - Ø¥ÙƒØ³Ø³ÙˆØ§Ø±Ø§Øª Ù…Ù†Ø²Ù„ÙŠØ© ÙÙ†ÙŠØ©"],
        "Heritage & Cultural Identity - Ø§Ù„ØªØ±Ø§Ø« ÙˆØ§Ù„Ù‡ÙˆÙŠØ© Ø§Ù„Ø«Ù‚Ø§ÙÙŠØ©": ["Bedouin Products - Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¯ÙˆÙŠØ©", "Nubian Products - Ù…Ù†ØªØ¬Ø§Øª Ù†ÙˆØ¨ÙŠØ©", "Rural Products - Ù…Ù†ØªØ¬Ø§Øª Ø±ÙŠÙÙŠØ©", "Oasis & Sinai Products - Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ÙˆØ§Ø­Ø§Øª ÙˆØ³ÙŠÙ†Ø§Ø¡", "Rare Heritage Products - Ù…Ù†ØªØ¬Ø§Øª ØªØ±Ø§Ø«ÙŠØ© Ù†Ø§Ø¯Ø±Ø©"]
    };

    const subSelect = document.getElementById("subCategory");

    function updateSubCategories() {
        const mainSelect = document.getElementById("mainCategory");
        subSelect.innerHTML = '<option value="">-- Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø³Ù… Ø§Ù„ÙØ±Ø¹ÙŠ --</option>';
        const selectedMain = mainSelect.value;
        if (selectedMain && categoriesData[selectedMain]) {
            subSelect.disabled = false;
            categoriesData[selectedMain].forEach(sub => {
                let option = document.createElement("option"); option.value = sub; option.text = sub; subSelect.add(option);
            });
        } else {
            subSelect.disabled = true;
        }
    }

    let uploadedUrls = []; 

    // --- ÙƒÙˆØ¯ Ø±ÙØ¹ Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¹Ø§Ø±Ø¶ ---
    document.getElementById("vLogoInput").addEventListener("change", async function() {
        const file = this.files[0];
        if(!file) return;

        const logoBtn = document.getElementById("logoSelectBtn");
        logoBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ Ø§Ù„Ù„ÙˆØ¬Ùˆ...";
        logoBtn.classList.add("disabled");

        try {
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙØ³ Ø¯Ø§Ù„Ø© Ø§Ù„Ø±ÙØ¹
            exhibitorLogoUrl = await uploadToCloudinary(file, 'image');
            document.getElementById("logoPreviewArea").innerHTML = `<img src="${exhibitorLogoUrl}" style="width:100px; height:100px; object-fit:contain; border-radius:50%; border:2px solid #6f42c1;">`;
            logoBtn.innerText = "âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù„ÙˆØ¬Ùˆ";
        } catch(e) {
            alert("âŒ ÙØ´Ù„ Ø±ÙØ¹ Ø§Ù„Ù„ÙˆØ¬Ùˆ: " + e);
            logoBtn.innerText = "ğŸ“¸ Ø±ÙØ¹ ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶/Ø§Ù„Ù„ÙˆØ¬Ùˆ";
        }
        logoBtn.classList.remove("disabled");
    });

    // --- ÙƒÙˆØ¯ Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ---
    document.getElementById("fileInput").addEventListener("change", async function() {
        const files = this.files;
        if(files.length === 0) return;
        if (uploadedUrls.length + files.length > MAX_IMAGES) {
            alert(`â›” ØªÙ†Ø¨ÙŠÙ‡: Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù‡Ùˆ ${MAX_IMAGES} ØµÙˆØ±.`); this.value = ""; return;
        }

        document.getElementById("successMsg").style.display = "none";
        const status = document.getElementById("status");
        const selectBtn = document.getElementById("selectBtn");
        
        selectBtn.classList.add("disabled");
        selectBtn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø±ÙØ¹...";
        
        for(let i=0; i<files.length; i++) {
            status.innerText = `Ø¬Ø§Ø±ÙŠ Ø±ÙØ¹ ØµÙˆØ±Ø© ${i+1} Ù…Ù† ${files.length}...`;
            try {
                const url = await uploadToCloudinary(files[i], 'image'); 
                uploadedUrls.push(url);
                document.getElementById("previewArea").innerHTML += `<img src="${url}" class="preview-thumb">`;
            } catch(e) { alert("âŒ Ø®Ø·Ø£: " + e); }
        }

        status.innerText = `âœ… ØªÙ… Ø±ÙØ¹ ${uploadedUrls.length} ØµÙˆØ±`;
        selectBtn.innerText = "Ø¥Ø¶Ø§ÙØ© ØµÙˆØ± Ø£Ø®Ø±Ù‰";
        selectBtn.classList.remove("disabled");
        document.getElementById("processBtn").style.display = "block";
    });

    function uploadToCloudinary(file, resourceType) {
        return new Promise((resolve, reject) => {
            const formData = new FormData();
            formData.append("file", file);
            formData.append("upload_preset", UPLOAD_PRESET);
            const type = resourceType === 'raw' ? 'raw' : 'image';
            fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type}/upload`, { method: "POST", body: formData })
            .then(res => res.json())
            .then(data => {
                if (data.error) reject(data.error.message);
                else {
                    let url = data.secure_url;
                    if(resourceType === 'image') url = url.replace('/upload/', '/upload/q_auto,f_auto/');
                    resolve(url);
                }
            })
            .catch(err => reject("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„"));
        });
    }

    async function sendToGoogleSheet(sku, name, phone) {
        if(!GOOGLE_SHEET_URL) return;
        const formData = new FormData();
        formData.append("sku", sku);
        formData.append("name", name);
        formData.append("phone", phone);
        try { await fetch(GOOGLE_SHEET_URL, { method: "POST", body: formData, mode: "no-cors" }); } 
        catch (e) { console.log("Sheet Error"); }
    }

    async function smartTranslate(text) {
        if (!text) return { original: "", translated: "", lang: "ar" };
        const hasArabic = /[\u0600-\u06FF]/.test(text);
        const sourceLang = hasArabic ? "ar" : "en";
        const targetLang = hasArabic ? "en" : "ar";
        try {
            const response = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLang}&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`);
            const data = await response.json();
            const translatedText = data[0].map(x => x[0]).join("");
            return { ar: hasArabic ? text : translatedText, en: hasArabic ? translatedText : text };
        } catch (e) { return { ar: text, en: text }; }
    }

    async function createAndUploadTextFile(data) {
        let fileContent = '\uFEFF'; 
        fileContent += `--- Ù…Ù„Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ ---\nSKU: ${data.sku}\nDate: ${new Date().toLocaleDateString()}\n`;
        fileContent += `----------------------------\n[Exhibitor Info]\nName: ${data.vName}\nPhone: ${data.vPhone}\nBio (Ar): ${data.bioObj.ar}\nBio (En): ${data.bioObj.en}\n`;
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆØ¬Ùˆ Ù„Ù„Ù…Ù„Ù Ø§Ù„Ù†ØµÙŠ
        if(data.exhibitorLogoUrl) {
            let logoDl = data.exhibitorLogoUrl.replace('q_auto,f_auto', `q_auto,f_jpg,fl_attachment:Logo_${data.vPhone}`);
            fileContent += `Logo URL: ${logoDl}\n`;
        }
        fileContent += `----------------------------\n[Category]\nMain: ${data.mainCat}\nSub: ${data.subCat}\n`;
        fileContent += `----------------------------\n[Details]\nName (Ar): ${data.nameObj.ar}\nName (En): ${data.nameObj.en}\nPrice: ${data.price}\nWeight: ${data.weight} g\nDimensions: ${data.dimensionsObj.en}\n`;
        if(data.sizesObj.ar) fileContent += `Sizes (Ar): ${data.sizesObj.ar}\nSizes (En): ${data.sizesObj.en}\n`;
        if(data.colorsObj.ar) fileContent += `Colors (Ar): ${data.colorsObj.ar}\nColors (En): ${data.colorsObj.en}\n`;
        fileContent += `Product Story (Ar): ${data.descObj.ar}\nProduct Story (En): ${data.descObj.en}\n`;
        fileContent += `----------------------------\n[Images]\n`;
        data.uploadedUrls.forEach((url, i) => {
             let imgName = `${data.sku}_${i+1}`;
             let link = url.replace('q_auto,f_auto', `q_auto,f_jpg,fl_attachment:${imgName}`);
             fileContent += `${i+1}: ${link}\n`;
        });

        const blob = new Blob([fileContent], { type: "text/plain;charset=utf-8" });
        const file = new File([blob], `${data.sku}.txt`, { type: "text/plain;charset=utf-8" });
        return await uploadToCloudinary(file, 'raw');
    }

    async function processOrder() {
        const agreement = document.getElementById("agreementCheck").checked;
        if (!agreement) {
            alert("âš ï¸ ØªÙ†Ø¨ÙŠÙ‡:\nÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„Ù…Ù†ØªØ¬ ÙŠØ¯ÙˆÙŠ 100% ÙˆØ§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø¨Ù„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„.");
            return;
        }

        const sku = document.getElementById("pSku").value;
        const vName = document.getElementById("vName").value;
        const vPhone = document.getElementById("vPhone").value;
        const vBioInput = document.getElementById("vBio").value;
        const mainCat = document.getElementById("mainCategory").value;
        const subCat = document.getElementById("subCategory").value;
        const nameInput = document.getElementById("pName").value;
        const price = document.getElementById("pPrice").value;
        const weight = document.getElementById("pWeight").value;
        const dimensionsInput = document.getElementById("pDimensions").value;
        const descInput = document.getElementById("pDesc").value;
        const sizesInput = document.getElementById("pSizes").value;
        const colorsInput = document.getElementById("pColors").value;

        const processBtn = document.getElementById("processBtn");
        const waLinkBtn = document.getElementById("waLinkBtn");

        if(!vName || !vPhone || !vBioInput || !nameInput || !mainCat || !subCat) { alert("Ø£ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª"); return; }
        
        // ğŸ›‘ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ ÙƒÙ„Ù…Ø§Øª Ù†Ø¨Ø°Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶ (75 ÙƒÙ„Ù…Ø©)
        const bioWordCount = vBioInput.trim().split(/\s+/).length;
        if (bioWordCount < 75) {
            alert(`âš ï¸ Ù†Ø¨Ø°Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶ Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹!\nÙ„Ù‚Ø¯ ÙƒØªØ¨Øª ${bioWordCount} ÙƒÙ„Ù…Ø© ÙÙ‚Ø·.\nØ§Ù„Ù…Ø·Ù„ÙˆØ¨ 75 ÙƒÙ„Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.`);
            return;
        }

        // ğŸ›‘ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ ÙƒÙ„Ù…Ø§Øª Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (6 ÙƒÙ„Ù…Ø§Øª)
        const nameWordCount = nameInput.trim().split(/\s+/).length;
        if (nameWordCount < 6) {
            alert(`âš ï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ù‚ØµÙŠØ± Ø¬Ø¯Ø§Ù‹!\nÙŠØ¬Ø¨ Ø£Ù† ÙŠØªÙƒÙˆÙ† Ø§Ù„Ø§Ø³Ù… Ù…Ù† 6 ÙƒÙ„Ù…Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.`);
            return;
        }

        if(!dimensionsInput) { alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù…Ù†ØªØ¬"); return; }
        if(!sizesInput) { alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª"); return; }
        if(!colorsInput) { alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø§Ù„Ø£Ù„ÙˆØ§Ù†"); return; }
        
        // ğŸ›‘ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¹Ø¯Ø¯ ÙƒÙ„Ù…Ø§Øª Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ (75 ÙƒÙ„Ù…Ø©)
        const descWordCount = descInput.trim().split(/\s+/).length;
        if (descWordCount < 75) {
            alert(`âš ï¸ Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù‚ØµÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹!\nÙ„Ù‚Ø¯ ÙƒØªØ¨Øª ${descWordCount} ÙƒÙ„Ù…Ø© ÙÙ‚Ø·.\nØ§Ù„Ù…Ø·Ù„ÙˆØ¨ 75 ÙƒÙ„Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.`);
            return;
        }

        if(uploadedUrls.length === 0) { alert("Ø§Ø±ÙØ¹ ØµÙˆØ± Ù„Ù„Ù…Ù†ØªØ¬"); return; }

        processBtn.innerText = "â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ±Ø¬Ù…Ø© ÙˆØ§Ù„Ø­ÙØ¸...";
        processBtn.classList.add("disabled");

        // 1. Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ø´ÙŠØª
        await sendToGoogleSheet(sku, vName, vPhone);
        
        // 2. Ø§Ù„ØªØ±Ø¬Ù…Ø©
        const nameObj = await smartTranslate(nameInput);
        const descObj = await smartTranslate(descInput);
        const bioObj = await smartTranslate(vBioInput);
        const sizesObj = await smartTranslate(sizesInput);
        const colorsObj = await smartTranslate(colorsInput);
        const dimensionsObj = await smartTranslate(dimensionsInput);

        // 3. Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù†ØµÙŠ
        let textFileUrl = "";
        try {
            const productData = { sku, vName, vPhone, bioObj, mainCat, subCat, nameObj, price, weight, dimensionsObj, descObj, sizesObj, colorsObj, uploadedUrls, exhibitorLogoUrl };
            textFileUrl = await createAndUploadTextFile(productData);
            if(textFileUrl) textFileUrl = textFileUrl.replace('/upload/', `/upload/fl_attachment:${sku}/`);
        } catch (e) { console.error(e); }

        // 4. ØªØ¬Ù‡ÙŠØ² Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        let message = `*Ø·Ù„Ø¨ ØªØ³Ø¬ÙŠÙ„ Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯* \n======================== \n*SKU:* ${sku} \n======================== \n`;
        message += `ğŸ‘¤ *Ø§Ù„Ø§Ø³Ù…:* ${vName} \nğŸ“ *Ø§Ù„Ù‡Ø§ØªÙ:* ${vPhone} \nğŸ“ *Ø§Ù„Ù†Ø¨Ø°Ø©:* ${bioObj.ar} \n`;
        
        // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù„ÙˆØ¬Ùˆ Ù„Ù„Ø±Ø³Ø§Ù„Ø©
        if (exhibitorLogoUrl) {
            let logoDl = exhibitorLogoUrl.replace('q_auto,f_auto', `q_auto,f_jpg,fl_attachment:Logo_${vPhone}`);
            message += `ğŸ–¼ï¸ *ØµÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ø±Ø¶/Ø§Ù„Ù„ÙˆØ¬Ùˆ:*\n${exhibitorLogoUrl} \nâ¬‡ï¸ ${logoDl}\n`;
        }
        message += `======================== \n`;

        message += `ğŸ“‚ *Ø§Ù„ØªØµÙ†ÙŠÙ:* ${mainCat} -> ${subCat} \n======================== \n`;
        message += `ğŸ‡ªğŸ‡¬ *Ø¹Ø±Ø¨ÙŠ:* \nğŸ·ï¸ ${nameObj.ar} \n`;
        message += `ğŸ“ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª: ${sizesObj.ar} \n`;
        message += `ğŸ¨ Ø§Ù„Ø£Ù„ÙˆØ§Ù†: ${colorsObj.ar} \n`;
        message += `ğŸ“ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯: ${dimensionsObj.ar} \n`;
        message += `ğŸ“– *Ù‚ØµØ© Ø§Ù„Ù…Ù†ØªØ¬:* \n${descObj.ar} \n`;
        message += `------------------------ \n`;
        message += `ğŸ‡ºğŸ‡¸ *English:* \nğŸ·ï¸ ${nameObj.en} \n`;
        message += `ğŸ“ Sizes: ${sizesObj.en} \n`;
        message += `ğŸ¨ Colors: ${colorsObj.en} \n`;
        message += `ğŸ“ Dimensions: ${dimensionsObj.en} \n`;
        message += `ğŸ“– *Story:* \n${descObj.en} \n`;
        message += `ğŸ“ *Bio:* ${bioObj.en} \n======================== \n`;
        message += `ğŸ’° *Ø§Ù„Ø³Ø¹Ø±:* ${price} Ø¬.Ù… \n`;
        message += `âš–ï¸ *Ø§Ù„ÙˆØ²Ù†:* ${weight} Ø¬Ù… \n`;
        
        if(textFileUrl) message += `ğŸ“„ *Ù…Ù„Ù Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:* ${textFileUrl} \n======================== \n`;
        message += `ğŸ“· *Ø§Ù„ØµÙˆØ±:* \n`;
        uploadedUrls.forEach((url, i) => {
            let dl = url.replace('q_auto,f_auto', `q_auto,f_jpg,fl_attachment:${sku}_${i+1}`);
            message += `${i+1}. ${url} \nâ¬‡ï¸ ${dl} \n\n`;
        });

        // 5. ØªÙØ¹ÙŠÙ„ Ø²Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        const finalLink = `https://wa.me/${201025889935}?text=${encodeURIComponent(message)}`;
        waLinkBtn.href = finalLink;
        waLinkBtn.style.display = "block";
        
        processBtn.style.display = "none";
        document.getElementById("successMsg").style.display = "block";
    }

    // --- Ø¯Ø§Ù„Ø© Ø§Ù„Ø±ÙŠÙØ±Ø´ Ø§Ù„Ø°ÙƒÙŠ ---
    function finishAndReset() {
        setTimeout(() => {
            // Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ ÙÙ‚Ø· (ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ø§Ø±Ø¶ ÙˆØ§Ù„Ù„ÙˆØ¬Ùˆ)
            document.getElementById("pName").value = "";
            document.getElementById("pPrice").value = "";
            document.getElementById("pWeight").value = "";
            document.getElementById("pDimensions").value = "";
            document.getElementById("pDesc").value = "";
            document.getElementById("pSizes").value = "";
            document.getElementById("pColors").value = "";

            document.getElementById("fileInput").value = "";
            document.getElementById("previewArea").innerHTML = "";
            uploadedUrls = []; 
            
            document.getElementById("agreementCheck").checked = false;

            document.getElementById("processBtn").style.display = "block";
            document.getElementById("processBtn").innerText = "ØªØ±Ø¬Ù…Ø© ÙˆØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ ğŸ”„";
            document.getElementById("processBtn").classList.remove("disabled");
            
            document.getElementById("waLinkBtn").style.display = "none";
            document.getElementById("successMsg").style.display = "none";
            document.getElementById("status").innerText = "";
            document.getElementById("selectBtn").innerText = "ğŸ“¸ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± (Max 4)";
            document.getElementById("selectBtn").classList.remove("disabled");

            generateSKU();
            document.getElementById("mainCategory").scrollIntoView({behavior: "smooth"});
            
        }, 1500);
    }
  </script>

</body>
</html>
